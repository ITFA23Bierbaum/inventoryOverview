{% extends "inventory/base.html" %}
{% block content %}
    <form id="frm_redirect"
          method="POST"
          enctype="multipart/form-data"
          action="{% url 'order-detail' %}"
          style="display: none" >
        <input id="input_redirectValue" name="selectedOrder" type="hidden" />
    </form>
    <form id="frm_content" method="POST" enctype="multipart/form-data" >
      {% csrf_token %}
        <style>
            table.ordersTable tr > *:nth-child(1) {
                width: 200px;
            }

            table.ordersTable tr > *:nth-child(2) {
                width: 300px;
            }
        </style>
        <script>
            function callback() {

            }

            function filterOnKeyDown(event) {
                if (event.keyCode >= 48 && event.keyCode <= 57
                        || event.keyCode >= 65 && event.keyCode <= 90
                        || event.keyCode == 8) {
                    console.log(event.path[0].value);
                }
            }

            function addFilterToOrders() {
                [].slice.call(document.getElementsByClassName('filter')[0].getElementsByTagName('input'))
                        .forEach(function(e) {
                    e.addEventListener('keyup', filterOnKeyDown, false);
                });
            }

            function orderClick(orderNo) {
                document.getElementById('input_redirectValue').value = orderNo;
                frm_redirect.submit();
            }
        </script>
        <table id="tbl_orders"
               class="ordersTable" >
            <thead >
                <tr class="header" >
                    <th>Auftrags-Nummer</th>
                    <th>Kunde</th>
                </tr>
                <tr class="filter" >
                    <th>
                        <input type="search" placeholder="Auftrags-Nummer" name="orderNoSearch" >
                    </th>
                    <th>
                        <input type="search" placeholder="Kunde" name="customerSearch" >
                    </th>
                </tr>
            </thead>
            <tbody>
                {% for order in orders %}
                <tr class="contentRow" onclick="orderClick('{{order.number}}');" >
                    <td>{{order.number}}</td>
                    <td>{{order.customer.name}}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </form>
{% endblock content %}